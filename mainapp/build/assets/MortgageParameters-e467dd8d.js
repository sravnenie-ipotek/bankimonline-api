import{j as t}from"./ui-vendor-19e4e52b.js";import{c as w}from"./index-40267bc7.js";import{a as C,M,k as B,c as L,I as k}from"./index-0069b652.js";import{i as N,u as b}from"./i18n-vendor-e8db3f4c.js";import{P as O}from"./PercentIcon-65a66346.js";import{r as T,u as F,f as $}from"./react-vendor-9ed0ad78.js";import{C as R}from"./Column-ab439506.js";const U=e=>{const c=e%10,i=e%100;return c===1&&i!==11?N.t("year_singular"):[2,3,4].includes(c)&&![12,13,14].includes(i)?N.t("year_dual"):N.t("year_plural")},I=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...e,children:t.jsx("path",{fill:"#FBE54D",d:"M16.25 2.5h-1.875v-.625a.625.625 0 1 0-1.25 0V2.5h-6.25v-.625a.625.625 0 0 0-1.25 0V2.5H3.75A1.25 1.25 0 0 0 2.5 3.75v12.5a1.25 1.25 0 0 0 1.25 1.25h12.5a1.25 1.25 0 0 0 1.25-1.25V3.75a1.25 1.25 0 0 0-1.25-1.25ZM5.625 3.75v.625a.625.625 0 0 0 1.25 0V3.75h6.25v.625a.625.625 0 1 0 1.25 0V3.75h1.875v2.5H3.75v-2.5h1.875Zm10.625 12.5H3.75V7.5h12.5v8.75Z"})}),G="_modal_11yd4_1",V="_ellipse_11yd4_74",Z={modal:G,"modal-header":"_modal-header_11yd4_11","modal-header__title":"_modal-header__title_11yd4_16","modal-content__text":"_modal-content__text_11yd4_27","modal-content__row":"_modal-content__row_11yd4_35","modal-content__title":"_modal-content__title_11yd4_48","modal-content__condition":"_modal-content__condition_11yd4_65",ellipse:V},d=w.bind(Z),z=({isVisible:e,onClose:c,title:i,description:o,conditionFinance:a,conditionPeriod:v,conditionBid:h})=>{const{t:r,i18n:x}=b(),{getContent:p}=C("bank_offers"),[l,g]=T.useState("description"),_=[{value:"description",label:p("description","description")},{value:"condition",label:p("condition","condition")}],j=m=>{g(m)};return t.jsx(M,{isVisible:e,onCancel:c,children:t.jsxs("div",{className:d("modal"),children:[t.jsxs("div",{className:d("modal-header"),children:[t.jsx("div",{className:d("modal-header__title"),children:i}),t.jsx(B,{handleChange:j,tabs:_,tab:l})]}),t.jsxs("div",{children:[l==="description"&&t.jsx("div",{className:d("modal-content"),children:t.jsx("p",{className:d("modal-content__text"),children:o})}),l==="condition"&&t.jsxs("div",{className:d("modal-content"),children:[t.jsxs("div",{className:d("modal-content__row"),children:[t.jsx("p",{className:d("modal-content__condition"),children:r("calculate_mortgage_parameters_initial")}),t.jsxs("div",{className:d("modal-content__title"),children:[t.jsx("span",{className:d("ellipse")}),t.jsx("p",{children:a})]})]}),t.jsxs("div",{className:d("modal-content__row"),children:[t.jsx("p",{className:d("modal-content__condition"),children:r("mortgage_term")}),t.jsxs("div",{className:d("modal-content__title"),children:[t.jsx("span",{className:d("ellipse")}),t.jsx("p",{children:v})]})]}),t.jsxs("div",{className:d("modal-content__row"),children:[t.jsx("p",{className:d("modal-content__condition"),children:r("bid")}),t.jsx("p",{className:d("modal-content__title"),children:h})]})]})]})]})})},H="_card_ixwh9_1",Y="_wrapper_ixwh9_83",q={card:H,"card-title":"_card-title_ixwh9_9","card-title__ellipse":"_card-title__ellipse_ixwh9_14","card-title__text":"_card-title__text_ixwh9_20","card-title__info":"_card-title__info_ixwh9_27","card-content":"_card-content_ixwh9_30","card-content__desc":"_card-content__desc_ixwh9_35","card-content__price":"_card-content__price_ixwh9_42","card-desc":"_card-desc_ixwh9_53","card-desc__content":"_card-desc__content_ixwh9_64","card-desc__content-desc":"_card-desc__content-desc_ixwh9_69","card-desc__content-title":"_card-desc__content-title_ixwh9_76",wrapper:Y},n=w.bind(q),at=({title:e,mortgageAmount:c,monthlyPayment:i,percent:o,period:a,description:v,conditionFinance:h,conditionPeriod:r,conditionBid:x})=>{const{t:p,i18n:l}=b(),g=c.toLocaleString("en-US"),_=i.toLocaleString("en-US"),[j,{open:m,close:f}]=L();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:n("card"),children:[t.jsxs("div",{className:n("card-title"),children:[t.jsx("span",{className:n("card-title__ellipse")}),t.jsx("p",{className:n("card-title__text"),children:e}),t.jsx(k,{className:n("card-title__info"),onClick:m,size:20})]}),t.jsxs("div",{className:n("wrapper"),children:[t.jsxs("div",{className:n("card-content"),children:[t.jsx("p",{className:n("card-content__desc"),children:p("mortgage_total")}),t.jsxs("p",{className:n("card-content__price"),children:[g," ₪"]})]}),t.jsxs("div",{className:n("card-content"),children:[t.jsx("p",{className:n("card-content__desc"),children:p("mortgage_monthly")}),t.jsxs("p",{className:n("card-content__price"),children:[_," ₪"]})]})]}),t.jsxs("div",{className:n("wrapper"),children:[t.jsxs("div",{className:n("card-desc"),children:[t.jsx(O,{}),t.jsxs("div",{className:n("card-desc__content"),children:[t.jsx("p",{className:n("card-desc__content-desc"),children:p("mortgage_percnt")}),t.jsxs("p",{className:n("card-desc__content-title"),children:[Number(o).toFixed(2),"%"]})]})]}),t.jsxs("div",{className:n("card-desc"),children:[t.jsx(I,{}),t.jsxs("div",{className:n("card-desc__content"),children:[t.jsx("p",{className:n("card-desc__content-desc"),children:p("mortgage_term")}),t.jsxs("p",{className:n("card-desc__content-title"),children:[a," ",U(a)]})]})]})]})]}),t.jsx(z,{isVisible:j,onClose:f,title:e,description:v,conditionFinance:h,conditionPeriod:r,conditionBid:x})]})},W=()=>{const e=F();return e.pathname.includes("/calculate-mortgage")?"mortgage":e.pathname.includes("/calculate-credit")?"credit":e.pathname.includes("/refinance-mortgage")?"refinance-mortgage":e.pathname.includes("/refinance-credit")?"refinance-credit":null},E=()=>"https://bankimonline.com/api",st=async e=>{var h;const c=E(),i=N.language||"en",o=i==="he"?"he-IL":i==="ru"?"ru-RU":"en-US",a=await fetch(`${c}/customer/compare-banks`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":o},body:JSON.stringify(e)});if(!a.ok){const r=await a.text();throw console.error("❌ [BANK-API] Error:",a.status,r),new Error(`API Error: ${a.status} - ${r}`)}return((h=(await a.json()).data)==null?void 0:h.bank_offers)||[]},dt=async()=>{var e;try{const c=E(),i=N.language||"en",o=i==="he"?"he-IL":i==="ru"?"ru-RU":"en-US",a=await fetch(`${c}/customer/mortgage-programs`,{method:"GET",headers:{"Content-Type":"application/json","Accept-Language":o}});if(a.ok)return((e=(await a.json()).data)==null?void 0:e.programs)||[];throw console.warn("⚠️ [MORTGAGE-PROGRAMS-API] Failed to fetch programs"),new Error(`Failed to fetch programs: ${a.status}`)}catch(c){throw console.error("❌ [MORTGAGE-PROGRAMS-API] Error:",c),c}},ot=(e,c,i,o,a,v)=>{var j;const h=o==="credit",r=a||`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let x;if(c!=null&&c.birthday){const m=new Date(c.birthday);if(!isNaN(m.getTime())){const f=new Date;x=f.getFullYear()-m.getFullYear();const u=f.getMonth()-m.getMonth();(u<0||u===0&&f.getDate()<m.getDate())&&x--,(x<18||x>100)&&(x=void 0)}}const p=(c==null?void 0:c.monthlyIncome)||(i==null?void 0:i.monthlyIncome)||(e==null?void 0:e.monthlyIncome)||0;let l=0,g=0;h?(l=e.loanAmount||0,g=0):o==="refinance-credit"?(l=(e.creditData||[]).reduce((f,u)=>{const y=u.amount||0;return f+y},0),g=0):o==="refinance-mortgage"?(l=e.mortgageBalance||0,g=e.priceOfEstate||0):(l=e.priceOfEstate&&e.initialFee?e.priceOfEstate-e.initialFee:e.priceOfEstate*.5,g=e.priceOfEstate||0),o==="refinance-credit"&&((j=e==null?void 0:e.creditData)==null||j.forEach((m,f)=>{}));const _={loan_type:h?"credit":"mortgage",amount:l,property_value:g,monthly_income:p,birth_date:c==null?void 0:c.birthday,employment_start_date:i==null?void 0:i.startDate,age:x||35,employment_years:(i==null?void 0:i.employmentYears)||0,property_ownership:e.propertyOwnership||"no_property",session_id:r,client_id:v,education:c==null?void 0:c.education,citizenship:c==null?void 0:c.citizenship,marital_status:c==null?void 0:c.familyStatus,children_count:(c==null?void 0:c.childrens)==="yes"?(c==null?void 0:c.childrenCount)||1:0,property_city:e==null?void 0:e.cityWhereYouBuy,property_type:h||e==null?void 0:e.typeSelect,is_first_apartment:h?!1:(e==null?void 0:e.willBeYourFirst)==="1",has_medical_insurance:(c==null?void 0:c.medicalInsurance)==="yes",is_foreigner:(c==null?void 0:c.isForeigner)==="yes",is_public_figure:(c==null?void 0:c.publicPerson)==="yes"};return console.log("Bank offers API - Request payload prepared:",{loan_type:_.loan_type,amount:_.amount,monthly_income:_.monthly_income,age:_.age,citizenship:_.citizenship}),_},J=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:t.jsx("path",{fill:"#FBE54D",d:"M3.75 8.25h3.094a3 3 0 0 0 5.812 0h7.594a.75.75 0 1 0 0-1.5h-7.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 0 0 0 1.5Zm6-2.25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm10.5 9.75h-1.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 1 0 0 1.5h9.094a3 3 0 0 0 5.812 0h1.594a.75.75 0 1 0 0-1.5ZM15.75 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"})}),K="_parameters_1op4u_1",Q="_wrapper_1op4u_49",X={parameters:K,"parameters-title":"_parameters-title_1op4u_11","parameters-title__text":"_parameters-title__text_1op4u_16","parameters-title__icon":"_parameters-title__icon_1op4u_22","parameters-data":"_parameters-data_1op4u_29","parameters-data__title":"_parameters-data__title_1op4u_35","parameters-data__desc":"_parameters-data__desc_1op4u_41",wrapper:Q},s=w.bind(X),rt=({cost:e,initialPayment:c,period:i,credit:o,onEditClick:a})=>{const{t:v,i18n:h}=b(),{getContent:r}=C("mortgage_step4"),x=$(),p=W(),l=p==="credit",g=e!=null?Number(e):void 0,_=c!=null?Number(c):void 0,j=o!=null?Number(o):void 0,m=i!=null?Number(i):void 0,f=()=>{switch(p){case"mortgage":return"/services/calculate-mortgage/1";case"credit":return"/services/calculate-credit/1";case"refinance-mortgage":return"/services/refinance-mortgage/1";case"refinance-credit":return"/services/refinance-credit/1";default:return"/services/calculate-mortgage/1"}},u=g!==void 0?g.toLocaleString("en-US"):void 0,y=_!==void 0?_.toLocaleString("en-US"):void 0,S=j!==void 0?j.toLocaleString("en-US"):void 0,A=m!==void 0?m*12:void 0;return t.jsx(R,{children:t.jsxs("div",{className:s("parameters"),children:[t.jsxs("div",{className:s("parameters-title"),children:[t.jsx("p",{className:s("parameters-title__text"),children:r("calculate_mortgage_parameters","calculate_mortgage_parameters")}),t.jsx(J,{onClick:a||(()=>x(f())),className:s("parameters-title__icon")})]}),t.jsxs("div",{className:s("wrapper"),children:[S&&t.jsxs("div",{className:s("parameters-data"),children:[t.jsxs("div",{className:s("parameters-data__title"),children:[S," ₪"]}),t.jsx("div",{className:s("parameters-data__desc"),children:v("sum_credit")})]}),u&&t.jsxs("div",{className:s("parameters-data"),children:[t.jsxs("div",{className:s("parameters-data__title"),children:[u," ₪"]}),t.jsx("div",{className:s("parameters-data__desc"),children:r(l?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost",l?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost")})]}),y&&t.jsxs("div",{className:s("parameters-data"),children:[t.jsxs("div",{className:s("parameters-data__title"),children:[y," ₪"]}),t.jsx("div",{className:s("parameters-data__desc"),children:r("calculate_mortgage_parameters_initial","calculate_mortgage_parameters_initial")})]})]}),A&&t.jsx("div",{className:s("wrapper"),children:t.jsxs("div",{className:s("parameters-data"),children:[t.jsxs("div",{className:s("parameters-data__title"),children:[A," ",r("calculate_mortgage_parameters_months","calculate_mortgage_parameters_months")]}),t.jsx("div",{className:s("parameters-data__desc"),children:r(l?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period",l?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period")})]})})]})})};export{z as B,rt as M,at as P,dt as a,st as f,ot as t,W as u};
